'use strict'

exports.define = {
  merge: merge
}

function merge (pckg) {
  var config = this
  var subconfig = pckg[config._nameSpace && config._nameSpace.val]

  if (subconfig) {
    pckg = subconfig
  }

  var category = config.category && config.category.val
  var name = config.name && config.name.val
  var myConfig = category && pckg[category] && pckg[category][name]
  var setobj = myConfig || {}

  for (var key in pckg) {
    if (key !== category && !setobj[key] && !config[key]) {
      setobj[key] = pckg[key]
    }
  }
  config.set(setobj)
  return config
}
